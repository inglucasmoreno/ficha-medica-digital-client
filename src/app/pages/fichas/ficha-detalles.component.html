<!-- Modal: Historial de turno -->
<app-modal-medium [showModal]="showModalTurnos">
  <div class="bg-primary-800 px-3 py-2 rounded-t flex items-center justify-between">
      <h1 class="text-white text-xl"> Historial de turnos </h1>
      <button (click)="showModalTurnos = false" class="text-white focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>            
      </button>    
  </div>
      
  <!-- Tabla de turnos -->
  <div class="px-4 pt-3 flex items-center justify-between">
      <div>
          <p class="text-sm"> <span class="font-semibold"> Apellido y Nombre: </span> <span class="capitalize"> {{ ficha?.apellido?.toLowerCase() }} {{ ficha?.nombre?.toLowerCase() }} </span> </p>
          <p class="text-sm"> <span class="font-semibold"> DNI: </span> <span> {{ ficha?.dni }} </span> </p>   
          <p class="text-sm"> <span class="font-semibold"> Nro de afiliado: </span> <span> {{ ficha?.nro_afiliado }} </span> </p>   
      </div>
      <select *ngIf="turnos?.length > 0" [(ngModel)]="filtroTurnos.estado" class="w-56 border ml-4 rounded text-sm focus:outline-none border-gray-300 p-2">
          <option value=""> Todos </option>
          <option value="confirmados"> Confirmados </option>
          <option value="vencidos"> Vencidos </option>
          <option value="cancelados"> Cancelados </option>
      </select>
  </div>
  <div class="mb-5 rounded-t px-4 mt-4">
      <div *ngIf="turnos?.length > 0" class="py-2 overflow-x-auto">
          <div class="inline-block overflow-y-auto max-h-80 min-w-full overflow-hidden">
              <table class="min-w-full leading-normal">
                  <thead>
                      <tr class="bg-gray-100 py-2 border">
                          <th class="px-5 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                              <div (click)="ordenarPorColumnaTurnos('fecha_turno')" class="cursor-pointer flex items-center focus:outline-none">
                                  <span> Fecha </span>
                                  <span class="ml-2 text-gray-600">    
                                      <svg *ngIf="ordenarTurnos.columna == 'fecha_turno' && ordenarTurnos.direccion == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                      <svg *ngIf="ordenarTurnos.columna == 'fecha_turno' && ordenarTurnos.direccion == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                      <svg *ngIf="ordenarTurnos.columna != 'fecha_turno'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                  </span>
                              </div>
                          </th>
                          <th class="px-5 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                              <div (click)="ordenarPorColumnaTurnos('fecha_turno')" class="cursor-pointer flex items-center focus:outline-none">
                                  <span> Hora </span>
                                  <span class="ml-2 text-gray-600">    
                                      <svg *ngIf="ordenarTurnos.columna == 'fecha_turno' && ordenarTurnos.direccion == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                      <svg *ngIf="ordenarTurnos.columna == 'fecha_turno' && ordenarTurnos.direccion == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                      <svg *ngIf="ordenarTurnos.columna != 'fecha_turno'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                  </span>
                              </div>
                          </th>
                          <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                            <div (click)="ordenarPorColumnaTurnos('creatorUser.profesional')" class="cursor-pointer flex items-center focus:outline-none">
                                <span> Profesional </span>
                                <span class="ml-2 text-gray-600">    
                                    <svg *ngIf="ordenarTurnos.columna == 'creatorUser.profesional' && ordenarTurnos.direccion == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                    <svg *ngIf="ordenarTurnos.columna == 'creatorUser.profesional' && ordenarTurnos.direccion == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                    <svg *ngIf="ordenarTurnos.columna != 'creatorUser.profesional'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                </span>
                            </div>
                        </th>
                          <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                              <div (click)="ordenarPorColumnaTurnos('creatorUser.apellido')" class="cursor-pointer flex items-center focus:outline-none">
                                  <span> Operador </span>
                                  <span class="ml-2 text-gray-600">    
                                      <svg *ngIf="ordenarTurnos.columna == 'creatorUser.apellido' && ordenarTurnos.direccion == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                      <svg *ngIf="ordenarTurnos.columna == 'creatorUser.apellido' && ordenarTurnos.direccion == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                      <svg *ngIf="ordenarTurnos.columna != 'creatorUser.apellido'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                  </span>
                              </div>
                          </th>
                          <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                              <div class="flex items-center focus:outline-none">
                                  <span> Estado </span>
                              </div>
                          </th>
                      </tr>
                  </thead>
                  <tbody *ngIf="turnos">
                      <tr [ngClass]="{'bg-green-100':turno.confirmacion, 'bg-orange-100':turno.vencido, 'bg-red-100':turno.cancelado }" class="animate__animated animate__fadeIn" *ngFor="let turno of turnos |  filtroTurnos:'':filtroTurnos.estado">
                          <td class="px-5 py-2 border-b border-gray-200 text-xs">
                              <p class="text-gray-900 whitespace-no-wrap">
                                  {{ turno.fecha_turno | fecha }}
                              </p>
                          </td>
                          <td class="px-5 py-2 border-b border-gray-200 text-xs">
                              <p class="text-gray-900 whitespace-no-wrap">
                                  {{ turno.fecha_turno | hora }} hs
                              </p>
                          </td>
                          <td class="px-5 border-b border-gray-200 text-xs">
                            <p class="text-gray-900 whitespace-no-wrap capitalize">
                                {{ turno?.profesional?.apellido.toLowerCase() }} {{ turno?.profesional?.nombre.toLowerCase()  }}
                            </p>
                          </td>
                          <td class="px-5 border-b border-gray-200 text-xs">
                              <p class="text-gray-900 whitespace-no-wrap capitalize">
                                  {{ turno?.creatorUser?.apellido.toLowerCase() }} {{ turno?.creatorUser?.nombre.toLowerCase()  }}
                              </p>
                          </td>
                          <td class="px-5 py-2 border-b border-gray-200 text-xs">
                              <p *ngIf="turno.activo" class="text-gray-900 whitespace-no-wrap"> Activo </p>
                              <p *ngIf="turno.confirmacion" class="text-gray-900 whitespace-no-wrap"> Confirmado </p>
                              <p *ngIf="turno.cancelado" class="text-gray-900 whitespace-no-wrap"> Cancelado </p>
                              <p *ngIf="turno.vencido" class="text-gray-900 whitespace-no-wrap"> Vencido </p>
                          </td>
                      </tr>
                  </tbody>
              </table>
          </div>
      </div>
      <div *ngIf="turnos?.length === 0">
          <p class="text-xl text-gray-900 mt-2 border p-2 bg-gray-100 border-gray-300"> No se encontraron turnos </p>   
      </div>
  </div>
</app-modal-medium>

<!-- Info: Nota de profesional -->
<app-modal [showModal]="showModalInfoNota">
  <div>
    <div class="bg-primary-800 text-white flex items-center justify-between p-2 rounded-t">
      <h1 class="text-lg"> Nota de consulta </h1>
      <button class="focus:outline-none" (click)="showModalInfoNota = false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>    
      </button>
    </div>
    <div class="p-4">
      <div class="flex items-center">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Fecha de consulta:   
          </span>
          <span>
            {{ notaSeleccionada?.createdAt | fecha }}
          </span>
        </p>
      </div>   
      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900  rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z" />
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Profesional:   
          </span>
          <span class="capitalize">
            {{ notaSeleccionada?.creatorUser.apellido.toLowerCase() }} {{ notaSeleccionada?.creatorUser.nombre.toLowerCase() }}
          </span>
        </p>
      </div>  
      <div class="py-2">
        <p class="font-semibold rounded bg-gray-100 border border-gray-300 w-full p-1 mt-2"> Nota del profesional </p>
        <p class="mt-2"> <span class="text-sm"> {{ notaSeleccionada?.descripcion }}  </span> </p>   
      </div> 
      <button (click)="showModalInfoNota = false" class="bg-secondaryColor mt-4 text-white w-full rounded focus:outline-none p-2">
        Regresar
      </button> 
    </div>
  </div> 
</app-modal>

<!-- Info: Nota de antecedentes -->
<app-modal [showModal]="showModalInfoAntecedente">
  <div>
    <div class="bg-primary-800 text-white flex items-center justify-between p-2 rounded-t">
      <h1 class="text-lg"> Antecedente personal / Familiar </h1>
      <button class="focus:outline-none" (click)="showModalInfoAntecedente = false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>    
      </button>
    </div>
    <div class="p-4">
      <div class="flex items-center">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Fecha de alta:   
          </span>
          <span>
            {{ antecedenteSeleccionado?.createdAt | fecha }}
          </span>
        </p>
      </div>   
      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900  rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z" />
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Profesional:   
          </span>
          <span class="capitalize">
            {{ antecedenteSeleccionado?.creatorUser?.apellido?.toLowerCase() }} {{ antecedenteSeleccionado?.creatorUser?.nombre.toLowerCase() }}
          </span>
        </p>
      </div>  
      <div class="py-2">
        <p class="font-semibold rounded bg-gray-100 border border-gray-300 w-full p-1 mt-2"> Antecedente </p>
        <p class="mt-2"> <span class="text-sm"> {{ antecedenteSeleccionado?.descripcion }}  </span> </p>   
      </div> 
      <button (click)="showModalInfoAntecedente = false" class="bg-secondaryColor mt-4 text-white w-full rounded focus:outline-none p-2">
        Regresar
      </button> 
    </div>
  </div> 
</app-modal>

<!-- Info: Alergia -->
<app-modal [showModal]="showModalInfoAlergia">
  <div>
    <div class="bg-primary-800 text-white flex items-center justify-between p-2 rounded-t">
      <h1 class="text-lg"> Información de alergia </h1>
      <button class="focus:outline-none" (click)="showModalInfoAlergia = false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>    
      </button>
    </div>
    <div class="p-4">
      <div class="flex items-center">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Fecha de alta:   
          </span>
          <span>
            {{ alergiaSeleccionada?.createdAt | fecha }}
          </span>
        </p>
      </div>   
      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900  rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z" />
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Profesional:   
          </span>
          <span class="capitalize">
            {{ alergiaSeleccionada?.creatorUser?.apellido?.toLowerCase() }} {{ alergiaSeleccionada?.creatorUser?.nombre?.toLowerCase() }}
          </span>
        </p>
      </div>  
      <div class="py-2">
        <p class="font-semibold rounded bg-gray-100 border border-gray-300 w-full p-1 mt-2"> Tipo de alergia </p>
        <p class="mt-2"> <span class="text-sm"> {{ alergiaSeleccionada?.tipo_alergia }}  </span> </p>   
      </div> 
      <button (click)="showModalInfoAlergia = false" class="bg-secondaryColor mt-4 text-white w-full rounded focus:outline-none p-2">
        Regresar
      </button> 
    </div>
  </div> 
</app-modal>

<!-- Info: Cirugia -->
<app-modal [showModal]="showModalInfoCirugia">
  <div>
    <div class="bg-primary-800 text-white flex items-center justify-between p-2 rounded-t">
      <h1 class="text-lg"> Información de cirugia </h1>
      <button class="focus:outline-none" (click)="showModalInfoCirugia = false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>    
      </button>
    </div>
    <div class="p-4">
      <div class="flex items-center">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Fecha de realización:   
          </span>
          <span>
            {{ cirugiaSeleccionada?.fecha_realizacion | fecha }}
          </span>
        </p>
      </div> 

      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900  rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z" />
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Profesional:   
          </span>
          <span class="capitalize">
            {{ cirugiaSeleccionada?.creatorUser?.apellido?.toLowerCase() }} {{ cirugiaSeleccionada?.creatorUser?.nombre?.toLowerCase() }}
          </span>
        </p>
      </div>  
  
      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Institución:   
          </span>
          <span>
            {{ cirugiaSeleccionada?.institucion?.trim() !== '' ? cirugiaSeleccionada?.institucion : 'No especificado' }}
          </span>
        </p>
      </div> 

      <div class="py-2">
        <p class="font-semibold rounded bg-gray-100 border border-gray-300 w-full p-1 mt-2"> Tipo de cirugia </p>
        <p class="mt-2"> <span class="text-sm"> {{ cirugiaSeleccionada?.tipo_cirugia }}  </span> </p>   
      </div> 
      <button (click)="showModalInfoCirugia = false" class="bg-secondaryColor mt-4 text-white w-full rounded focus:outline-none p-2">
        Regresar
      </button> 
    </div>
  </div> 
</app-modal>

<!-- Info: Estudios -->
<app-modal [showModal]="showModalInfoEstudio">
  <div>
    <div class="bg-primary-800 text-white flex items-center justify-between p-2 rounded-t">
      <h1 class="text-lg"> Información de estudio </h1>
      <button class="focus:outline-none" (click)="showModalInfoEstudio = false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>    
      </button>
    </div>
    <div class="p-4">
      <div class="flex items-center">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Fecha de alta:   
          </span>
          <span>
            {{ estudioSeleccionado?.createdAt| fecha }}
          </span>
        </p>
      </div> 

      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900  rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z" />
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Profesional:   
          </span>
          <span class="capitalize">
            {{ estudioSeleccionado?.creatorUser?.apellido?.toLowerCase() }} {{ estudioSeleccionado?.creatorUser?.nombre?.toLowerCase() }}
          </span>
        </p>
      </div>  
  
      <div class="flex items-center mt-2">
        <div class="bg-gray-100 border border-gray-300 shadow text-primary-900 rounded-full p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
          </svg>
        </div>
        <p>
          <span class="font-semibold ml-2">
            Laboratorio:   
          </span>
          <span>
            {{ estudioSeleccionado?.laboratorio?.trim() !== '' ? estudioSeleccionado?.laboratorio : 'No especificado' }}
          </span>
        </p>
      </div> 

      <div class="py-2">
        <p class="font-semibold rounded bg-gray-100 border border-gray-300 w-full p-1 mt-2"> Estudio </p>
        <p class="mt-2"> <span class="text-sm"> {{ estudioSeleccionado?.descripcion}}  </span> </p>   
      </div> 
      <button (click)="showModalInfoEstudio = false" class="bg-secondaryColor mt-4 text-white w-full rounded focus:outline-none p-2">
        Regresar
      </button> 
    </div>
  </div> 
</app-modal>


<!-- Datos de ficha -->
<app-modal [showModal]="showModalFicha">
  <div (keyup.enter)="actualizarFicha()">
    <div class="flex items-center justify-between bg-primary-800 rounded-t px-2 py-1">
        <h1 class=" text-white px-2 py-1 rounded-t text-xl"> Actualizando datos de ficha </h1>
        <svg (click)="showModalFicha = false" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="cursor-pointer feather feather-x text-white mr-2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
    </div>
    <div class="p-4">
      <div class="xl:flex items-center">
          <div class="xl:w-1/2">
              <p class="font-semibold text-sm"> <span class="text-red-500"> * </span> Nro de afiliado </p>
              <input [(ngModel)]="dataFicha.nro_afiliado" class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor appearance-none outline-none w-full text-gray-800" placeholder="Ej. 2365401" type="text">     
          </div>
          <div class="xl:ml-4 xl:w-1/2 mt-4 xl:mt-0"></div>
      </div>  
      <div class="xl:flex items-center mt-4">
          <div class="xl:w-1/2">
              <p class="font-semibold text-sm"> <span class="text-red-500"> * </span> Apellido </p>
              <input [(ngModel)]="dataFicha.apellido" class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor appearance-none outline-none w-full text-gray-800" placeholder="Ej. Moreno" type="text">     
          </div>
          <div class="xl:ml-4 xl:w-1/2 mt-4 xl:mt-0">
              <p class="font-semibold text-sm"> <span class="text-red-500"> * </span> Nombre </p>
              <input [(ngModel)]="dataFicha.nombre" class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor appearance-none outline-none w-full text-gray-800" placeholder="Ej. Lucas Omar" type="text">     
          </div>
      </div>
      <div class="xl:flex items-center mt-4">
          <div class="xl:w-1/2">
              <p class="font-semibold text-sm"> <span class="text-red-500"> * </span> DNI </p>
              <input [(ngModel)]="dataFicha.dni" class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor appearance-none outline-none w-full text-gray-800" placeholder="Ej. 34060398" type="text">                   
          </div>
          <div class="xl:ml-4 xl:w-1/2 mt-4 xl:mt-0">
              <p class="font-semibold text-sm"> <span class="text-red-500"> * </span> Fecha de nacimiento </p>
              <input [(ngModel)]="dataFicha.fecha_nacimiento" class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor appearance-none outline-none w-full text-gray-800" placeholder="Ej. 34060398" type="date">     
          </div>
      </div>    
      <div class="xl:flex items-center mt-4">
          <div class="xl:w-1/2">
              <p class="font-semibold text-sm"> Grupo sanguineo </p>
              <select class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor outline-none w-full text-gray-800" [(ngModel)]="dataFicha.grupo_sanguineo">
                  <option value=""> Sin datos </option>
                  <option value="A"> A </option>
                  <option value="O"> O </option>
                  <option value="AO"> AO </option>
                  <option value="B"> B </option>
              </select>
          </div>
          <div class="xl:ml-4 xl:w-1/2 mt-4 xl:mt-0">
              <p class="font-semibold text-sm"> RH </p>
              <select class="py-2 mt-1 text-sm border-b-2 border-gray-300 tranform duration-500 focus:border-secondaryColor outline-none w-full text-gray-800" [(ngModel)]="dataFicha.rh">
                  <option value=""> Sin datos </option>
                  <option value="+"> Positivo (+) </option>
                  <option value="-"> Negativo (-) </option>
              </select>
          </div>
      </div> 
      <div *ngIf="ficha" class="xl:flex items-center mt-4">
          <div class="xl:w-1/2">
              <p class="font-semibold text-sm"> Fecha de alta </p>
              <div class="border text-sm mt-2 border-gray-300 rounded p-2 bg-gray-100">
                  {{ ficha.createdAt | fecha }}
              </div>
          </div>
          <div class="xl:ml-4 xl:w-1/2 mt-4 xl:mt-0">
              <p class="font-semibold text-sm"> Usuario creador </p>
              <div class="border text-sm capitalize mt-2 border-gray-300 rounded p-2 bg-gray-100">
                  {{ ficha?.creatorUser?.apellido?.toLowerCase() }} {{ ficha?.creatorUser?.nombre?.toLowerCase() }}
              </div>
          </div>
      </div>   
      <div *ngIf="ficha" class="xl:flex items-center mt-4">
        <div class="xl:w-1/2">
            <p class="font-semibold text-sm"> Ultima modificación </p>
            <div class="border text-sm mt-2 border-gray-300 rounded p-2 bg-gray-100">
                {{ ficha?.updatedAt | fecha }}
            </div>
        </div>
        <div class="xl:ml-4 xl:w-1/2 mt-4 xl:mt-0">
            <p class="font-semibold text-sm"> Usuario ultima actualización </p>
            <div class="border text-sm capitalize mt-2 border-gray-300 rounded p-2 bg-gray-100">
                {{ ficha?.updatorUser?.apellido?.toLowerCase() }} {{ ficha?.updatorUser?.nombre?.toLowerCase() }}
            </div>
        </div>
      </div>   
      <div class="mt-2">
          <button (click)="actualizarFicha()" class="bg-gray-100 text-sm focus:outline-none hover:text-secondaryColor shadow text-gray-800 w-full border border-gray-300 font-semibold p-2 rounded mt-4"> Actualizar ficha </button>
      </div>
    </div>
</div>
</app-modal>

<!-- Nueva Nota de consulta -->
<app-modal [showModal]="showModalNota">
  <div class="bg-primary-800 p-2 rounded-t flex items-center text-white justify-between">
    <h1 class="text-white"> Resumen medico de la consulta </h1>
    <svg (click)="showModalNota = false" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </div>
  <div>
    <div class="p-2">
      <p class="font-semibold"> <span class="text-red-500"> * </span> Descripción </p>  
      <input (keyup.enter)="crearNotaConsulta()" [(ngModel)]="notaConsulta" placeholder="Contenido de la nota" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
      <button (click)="crearNotaConsulta()" class="p-2 my-2 focus:outline-none border border-gray-300 text-sm bg-gray-100 hover:text-secondaryColor font-semibold w-full"> Crear nota </button>
    </div>
  </div>
</app-modal>

<!-- Nuevo antecedente -->
<app-modal [showModal]="showModalAntecedente">
  <div class="bg-primary-800 p-2 rounded-t flex items-center text-white justify-between">
    <h1 class="text-white"> Creando antecedente </h1>
    <svg (click)="showModalAntecedente= false" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </div>
  <div>
    <div class="p-2">
      <p class="font-semibold"> <span class="text-red-500"> * </span> Descripción </p>  
      <input (keyup.enter)="crearAntecedente()" [(ngModel)]="antecedente" placeholder="Contenido del antecedente" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
      <button (click)="crearAntecedente()" class="p-2 my-2 focus:outline-none border border-gray-300 text-sm bg-gray-100 hover:text-secondaryColor font-semibold w-full"> Crear antecedente </button>
    </div>
  </div>
</app-modal>

<!-- Nueva alergia -->
<app-modal [showModal]="showModalAlergia">
  <div class="bg-primary-800 p-2 rounded-t flex items-center text-white justify-between">
    <h1 class="text-white"> Datos de alergia </h1>
    <svg (click)="showModalAlergia= false" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </div>
  <div>
    <div class="p-2">
      <p class="font-semibold"> <span class="text-red-500"> * </span> Tipo de alergia </p>  
      <input (keyup.enter)="crearAlergia()" [(ngModel)]="alergia" placeholder="Contenido de alergia" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
      <button (click)="crearAlergia()" class="p-2 my-2 focus:outline-none border border-gray-300 text-sm bg-gray-100 hover:text-secondaryColor font-semibold w-full"> Crear alergia </button>
    </div>
  </div>
</app-modal>

<!-- Nueva cirugia -->
<app-modal [showModal]="showModalCirugia">
  <div class="bg-primary-800 p-2 rounded-t flex items-center text-white justify-between">
    <h1 class="text-white"> Datos de cirugia </h1>
    <svg (click)="showModalCirugia= false" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </div>
  <div>
    <div class="p-2 flex">
      <div class="w-1/2">
        <p class="font-semibold"> <span class="text-red-500"> * </span> Fecha de realización </p>  
        <input (keyup.enter)="crearCirugia()" [(ngModel)]="cirugia_fecha" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="date" >
      </div>
      <div class="w-1/2 ml-2">
      </div>
    </div>
    <div class="p-2 flex">
      <div class="w-1/2">
        <p class="font-semibold"> <span class="text-red-500"> * </span> Tipo de cirugia </p>  
        <input (keyup.enter)="crearCirugia()" [(ngModel)]="cirugia" placeholder="Contenido de cirugia" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
      </div>
      <div class="w-1/2 ml-2">
        <p class="font-semibold"> Institución </p>  
        <input (keyup.enter)="crearCirugia()" [(ngModel)]="cirugia_institucion" placeholder="Descripción de institución" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
      </div>
    </div>
    <div class="p-2">
      <button (click)="crearCirugia()" class="p-2 focus:outline-none border border-gray-300 text-sm bg-gray-100 hover:text-secondaryColor font-semibold w-full"> Crear cirugia </button>
    </div>
  </div>
</app-modal>

<!-- Nuevo estudio -->
<app-modal [showModal]="showModalEstudio">
  <div class="bg-primary-800 p-2 rounded-t flex items-center text-white justify-between">
    <h1 class="text-white"> Datos del estudio </h1>
    <svg (click)="showModalEstudio= false" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </div>
  <div>
    <div class="p-2">
      <p class="font-semibold"> <span class="text-red-500"> * </span> Descripción </p>  
      <input (keyup.enter)="crearEstudio()" [(ngModel)]="estudio" placeholder="Información del estudio" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
    </div>
    <div class="px-2">
      <p class="font-semibold"> Laboratorio </p>  
      <input (keyup.enter)="crearEstudio()" [(ngModel)]="laboratorio" placeholder="Descripción de laboratorio" class="mt-2 border p-2 text-sm rounded border-gray-300 w-full focus:outline-none" type="text" >
    </div>
    <div class="px-2 mt-1">
      <button (click)="crearEstudio()" class="p-2 my-2 focus:outline-none border border-gray-300 text-sm bg-gray-100 hover:text-secondaryColor font-semibold w-full"> Crear estudio </button>
    </div>
  </div>
</app-modal>

<!-- Pagina principal -->

<!-- Encabezado con informacion -->
<div *ngIf="ficha" class="border border-gray-300 shadow rounded-t m-4">
  <div class="flex bg-primary-800 text-white shadow rounded-t p-4 items-center justify-between">
    <div class="">
      <div class="flex items-center">
        <div class="">
          <div class="flex items-center">
            <p class="text-3xl font-semibold"> {{ ficha?.apellido }} {{ ficha?.nombre }} </p>
          </div>
          <p class="text-sm"> Afiliado N° {{ ficha.nro_afiliado }}  </p>
        </div>
      </div>
      <div class="flex items-center">
        <div class="mt-4">
          <p> <span class="font-semibold"> DNI: </span> {{ ficha?.dni }} </p>
          <p *ngIf="ficha.grupo_sanguineo && ficha.rh"> <span class="font-semibold"> Grupo sanguineo: </span> {{ ficha?.grupo_sanguineo }} {{ ficha?.rh }} </p>
          <p *ngIf="!ficha.grupo_sanguineo && !ficha.rh"> <span class="font-semibold"> Grupo sanguineo: </span> No especificado </p>
        </div>
        <div class="mt-4 ml-10">
          <p> <span class="font-semibold"> Fecha de nacimiento: </span> {{ ficha.fecha_nacimiento | fecha }} </p>
          <p> <span class="font-semibold"> Edad: </span> {{ edad }} </p>
        </div>
      </div>
      <div class="flex items-center mt-4">
        <button (click)="abrirModalFicha()" title="Editar datos" class="cursor-pointer focus:outline-none p-2 bg-gray-100 border border-gray-300 text-primary-900 rounded hover:text-secondaryColor flex items-center">
          <svg title="Editar ficha" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
          </svg>
        </button>
        <button (click)="abrirModalTurnos()" title="Historial de turnos" class="p-2 focus:outline-none hover:text-secondaryColor border ml-3 border-gray-300 rounded text-primary-900 bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </button>
      </div>
    </div>
    <img class="w-40 mr-2" src="assets/img/fichas/avatar.svg" alt="Avatar">
  </div>
 
  <!-- Notas de consulta -->
  <div class="mb-8 rounded-t px-4">
    <div class="flex items-center justify-between mt-10">
      <h1 class="border-gray-300 font-semibold text-xl text-gray-800 rounded-t py-2"> Consultas médicas - Notas del profesional </h1>
      <button *ngIf="notasConsulta?.length > 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalNota()" class="hover:text-secondaryColor text-sm shadow border border-gray-300 focus:outline-none p-2 font-semibold rounded-t">
        Nueva nota
      </button>
    </div>
    <p class="mb-2 text-gray-500 text-xl" *ngIf="notasConsulta?.length === 0"> No se encontraron notas de consulta </p>  
    <button *ngIf="notasConsulta?.length === 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalNota()" class="border text-sm font-semibold hover:text-secondaryColor text-gray-800 focus:outline-none rounded shadow p-2 border-gray-300"> 
      Agregar nota de consulta
    </button>  
    <div *ngIf="notasConsulta?.length > 0" class="py-2 overflow-x-auto">
      <div class="inline-block max-h-56 overflow-y-auto min-w-full overflow-hidden">
            <table class="min-w-full leading-normal">
                <thead>
                    <tr>
                        <th class="px-5 py-1 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                            <div (click)="ordenarPorColumnaNotas('createdAt')" class="cursor-pointer flex items-center focus:outline-none">
                                <span> Fecha de consulta </span>
                                <span class="ml-2 text-gray-600">    
                                    <svg *ngIf="ordenar.columnaNotas == 'createdAt' && ordenar.direccionNotas == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                    <svg *ngIf="ordenar.columnaNotas == 'createdAt' && ordenar.direccionNotas == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                    <svg *ngIf="ordenar.columnaNotas != 'createdAt'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                </span>
                            </div>
                        </th>
                        <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                          <div (click)="ordenarPorColumnaNotas('descripcion')" class="cursor-pointer flex items-center focus:outline-none">
                              <span> Descripción </span>
                              <span class="ml-2 text-gray-600">    
                                  <svg *ngIf="ordenar.columnaNotas == 'descripcion' && ordenar.direccionNotas == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                  <svg *ngIf="ordenar.columnaNotas == 'descripcion' && ordenar.direccionNotas == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                  <svg *ngIf="ordenar.columnaNotas != 'descripcion'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                              </span>
                          </div>
                        </th>
                        <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                          <div (click)="ordenarPorColumnaNotas('creatorUser.apellido')" class="cursor-pointer flex items-center focus:outline-none">
                              <span> Profesional </span>
                              <span class="ml-2 text-gray-600">    
                                  <svg *ngIf="ordenar.columnaNotas == 'creatorUser.apellido' && ordenar.direccionNotas == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                  <svg *ngIf="ordenar.columnaNotas == 'creatorUser.apellido' && ordenar.direccionNotas == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                  <svg *ngIf="ordenar.columnaNotas != 'creatorUser.apellido'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                              </span>
                          </div>
                        </th>
                    </tr>
                </thead>
                <tbody *ngIf="notasConsulta">
                    <tr (click)="abrirInfoNota(nota)" class="animate__animated cursor-pointer hover:bg-indigo-50 animate__fadeIn" *ngFor="let nota of notasConsulta">
                        <td class="px-5 py-2 border-b border-gray-200 text-xs">
                            <p class="text-gray-900 whitespace-no-wrap capitalize">
                                {{ nota?.createdAt | fecha }}
                            </p>
                        </td>
                        <td class="px-5 border-b border-gray-200 text-xs">
                          <p class="text-gray-900 whitespace-no-wrap capitalize">
                              {{ nota?.descripcion }}
                          </p>
                        </td>
                        <td class="px-5 border-b border-gray-200 text-xs">
                          <p class="text-gray-900 whitespace-no-wrap capitalize w-max">
                              {{ nota?.creatorUser?.apellido }} {{ nota?.creatorUser?.nombre }}
                          </p>
                        </td>
                    </tr>
                </tbody>
            </table>
      </div>
    </div>
  </div>

  <div class="flex mt-5 px-4">
    <div class="w-1/2 border border-gray-300 shadow mb-5">
      <div class="flex items-center">
        <button (click)="seccion = 'Antecedentes'" [ngClass]="{'bg-secondaryColor text-white border-t border-secondaryColor': seccion === 'Antecedentes'}" class="border text-sm focus:outline-none bg-gray-100 border-gray-300 p-2 border-l-0 border-t-0 font-semibold"> Antecendetes personales / Familiares </button>
        <button (click)="seccion = 'Alergias'" [ngClass]="{'bg-secondaryColor text-white border-t border-secondaryColor': seccion === 'Alergias'}" class="border text-sm focus:outline-none bg-gray-100 border-gray-300 p-2 border-l-0 border-t-0  font-semibold"> Alergias </button>
        <button (click)="seccion = 'Cirugias'" [ngClass]="{'bg-secondaryColor text-white border-t border-secondaryColor': seccion === 'Cirugias'}" class="border text-sm focus:outline-none bg-gray-100 border-gray-300 p-2 border-l-0 border-t-0 font-semibold"> Cirugias </button>
      </div>
      
      <!-- Antecedentes -->
      <div *ngIf="seccion === 'Antecedentes'" class="p-2 mt-2 w-full">
        <div class="rounded-t">
          <div class="flex items-center justify-between">
            <div></div>
            <button *ngIf="antecedentes?.length > 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalAntecedentes()" class="hover:text-secondaryColor text-sm shadow border border-gray-300 focus:outline-none p-2 font-semibold rounded">
              Nuevo antecedente
            </button>
          </div>
          <p class="mb-2 text-gray-500 text-xl" *ngIf="antecedentes?.length === 0"> No se encontraron datos de antecedentes </p>  
          <button *ngIf="antecedentes?.length === 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalAntecedentes()" class="border text-sm font-semibold hover:text-secondaryColor text-gray-800 focus:outline-none rounded shadow p-2 border-gray-300"> 
            Agregar datos de antecedente
          </button>  
          <div *ngIf="antecedentes?.length > 0 " class="py-2 mt-4 overflow-x-auto">
            <div class="inline-block max-h-56 overflow-y-auto min-w-full overflow-hidden">
                  <table class="min-w-full leading-normal">
                      <thead>
                          <tr>
                              <th class="px-5 border-b-2 py-1 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                  <div (click)="ordenarPorColumnaAntecedentes('createdAt')" class="cursor-pointer flex items-center focus:outline-none">
                                      <span> Alta </span>
                                      <span class="ml-2 text-gray-600">    
                                          <svg *ngIf="ordenar.columnaAntecedentes == 'createdAt' && ordenar.direccionAntecedentes == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                          <svg *ngIf="ordenar.columnaAntecedentes == 'createdAt' && ordenar.direccionAntecedentes == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                          <svg *ngIf="ordenar.columnaAntecedentes != 'createdAt'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                      </span>
                                  </div>
                              </th>
                              <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaAntecedentes('descripcion')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Antecedente </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaAntecedentes == 'descripcion' && ordenar.direccionAntecedentes == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaAntecedentes == 'descripcion' && ordenar.direccionAntecedentes == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaAntecedentes != 'descripcion'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th>
                              <!-- <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaAntecedentes('creatorUser.apellido')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Registra </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaAntecedentes == 'creatorUser.apellido' && ordenar.direccionAntecedentes == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaAntecedentes == 'creatorUser.apellido' && ordenar.direccionAntecedentes == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaAntecedentes != 'creatorUser.apellido'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th> -->
                          </tr>
                      </thead>
                      <tbody *ngIf="antecedentes">
                          <tr (click)="abrirInfoAntecedente(antecedente)" class="animate__animated cursor-pointer hover:bg-indigo-50 animate__fadeIn" *ngFor="let antecedente of antecedentes">
                              <td class="px-5 py-2 border-b border-gray-200 text-xs">
                                  <p class="text-gray-900 whitespace-no-wrap">
                                      {{ antecedente.createdAt | fecha }}
                                  </p>
                              </td>
                              <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap capitalize">
                                    {{ antecedente.descripcion }}
                                </p>
                              </td>
                              <!-- <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap capitalize">
                                    {{ antecedente.creatorUser.apellido }} {{ antecedente.creatorUser.nombre }}
                                </p>
                              </td> -->
                          </tr>
                      </tbody>
                  </table>
            </div>
          </div>
        </div>      
      </div>

      <!-- Alergias -->
      <div *ngIf="seccion === 'Alergias'" class="p-2 mt-2 w-full">
        <div class="rounded-t">
          <div class="flex items-center justify-between">
            <div></div>
            <button *ngIf="alergias?.length > 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalAlergias()" class="hover:text-secondaryColor text-sm shadow border border-gray-300 focus:outline-none p-2 font-semibold rounded-t">
              Nueva alergia
            </button>
          </div>
          <p class="mb-2 text-gray-500 text-xl" *ngIf="alergias?.length === 0"> No se encontraron datos de alergias </p>  
          <button *ngIf="alergias?.length === 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalAlergias()" class="border text-sm font-semibold hover:text-secondaryColor text-gray-800 focus:outline-none rounded shadow p-2 border-gray-300"> 
            Agregar datos de alergia
          </button>  
          <div *ngIf="alergias?.length > 0" class="py-2 mt-4 overflow-x-auto">
            <div class="inline-block max-h-56 overflow-y-auto min-w-full overflow-hidden">
                  <table class="min-w-full leading-normal">
                      <thead>
                          <tr>
                              <th class="px-5 border-b-2 py-1 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                  <div (click)="ordenarPorColumnaAlergias('createdAt')" class="cursor-pointer flex items-center focus:outline-none">
                                      <span> Alta </span>
                                      <span class="ml-2 text-gray-600">    
                                          <svg *ngIf="ordenar.columnaAlergias == 'createdAt' && ordenar.direccionAlergias == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                          <svg *ngIf="ordenar.columnaAlergias == 'createdAt' && ordenar.direccionAlergias == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                          <svg *ngIf="ordenar.columnaAlergias != 'createdAt'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                      </span>
                                  </div>
                              </th>
                              <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaAlergias('tipo_alergia')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Tipo de alergia </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaAlergias == 'tipo_alergia' && ordenar.direccionAlergias == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaAlergias == 'tipo_alergia' && ordenar.direccionAlergias == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaAlergias != 'tipo_alergia'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th>
                              <!-- <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaAlergias('creatorUser.apellido')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Registra </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaAlergias == 'creatorUser.apellido' && ordenar.direccionAlergias == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaAlergias == 'creatorUser.apellido' && ordenar.direccionAlergias == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaAlergias != 'creatorUser.apellido'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th> -->
                          </tr>
                      </thead>
                      <tbody *ngIf="alergias">
                          <tr (click)="abrirInfoAlergia(alergia)" class="animate__animated cursor-pointer hover:bg-indigo-50 animate__fadeIn" *ngFor="let alergia of alergias">
                              <td class="px-5 py-2 border-b border-gray-200 text-xs">
                                  <p class="text-gray-900 whitespace-no-wrap">
                                      {{ alergia.createdAt | fecha }}
                                  </p>
                              </td>
                              <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap capitalize">
                                    {{ alergia.tipo_alergia }}
                                </p>
                              </td>
                              <!-- <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap capitalize">
                                    {{ alergia.creatorUser.apellido }} {{ alergia.creatorUser.nombre }}
                                </p>
                              </td> -->
                          </tr>
                      </tbody>
                  </table>
            </div>
          </div>
        </div>  
      </div>

      <!-- Cirugias -->
      <div *ngIf="seccion === 'Cirugias'" class="p-2 mt-2 w-full">
        <div class="rounded-t">
          <div class="flex items-center justify-between">
            <div></div>
            <button *ngIf="cirugias?.length > 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalCirugias()" class="hover:text-secondaryColor text-sm shadow border border-gray-300 focus:outline-none p-2 font-semibold rounded-t">
              Nueva cirugia
            </button>
          </div>
          <p class="mb-2 text-gray-500 text-xl" *ngIf="cirugias?.length === 0"> No se encontraron datos de cirugias </p>  
          <button *ngIf="cirugias?.length === 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalCirugias()" class="border text-sm font-semibold hover:text-secondaryColor text-gray-800 focus:outline-none rounded shadow p-2 border-gray-300"> 
            Agregar datos de cirugia
          </button>  
          <div *ngIf="cirugias?.length > 0" class="py-2 mt-4 overflow-x-auto">
            <div class="inline-block max-h-56 overflow-y-auto min-w-full overflow-hidden">
                  <table class="min-w-full leading-normal">
                      <thead>
                          <tr>
                              <th class="px-5 border-b-2 py-1 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                  <div (click)="ordenarPorColumnaCirugias('fecha_realizacion')" class="cursor-pointer flex items-center focus:outline-none">
                                      <span> Realización </span>
                                      <span class="ml-2 text-gray-600">    
                                          <svg *ngIf="ordenar.columnaCirugias == 'fecha_realizacion' && ordenar.direccionCirugias == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                          <svg *ngIf="ordenar.columnaCirugias == 'fecha_realizacion' && ordenar.direccionCirugias == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                          <svg *ngIf="ordenar.columnaCirugias != 'fecha_realizacion'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                      </span>
                                  </div>
                              </th>
                              <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaCirugias('tipo_alergia')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Tipo de cirugia </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaCirugias == 'tipo_alergia' && ordenar.direccionCirugias == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaCirugias == 'tipo_alergia' && ordenar.direccionCirugias == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaCirugias != 'tipo_alergia'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th>
                              <!-- <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaCirugias('institucion')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Institución </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaCirugias == 'institucion' && ordenar.direccionCirugias == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaCirugias == 'institucion' && ordenar.direccionCirugias == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaCirugias != 'institucion'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th> -->
                          </tr>
                      </thead>
                      <tbody *ngIf="cirugias">
                          <tr (click)="abrirInfoCirugia(cirugia)" class="animate__animated cursor-pointer hover:bg-indigo-50 animate__fadeIn" *ngFor="let cirugia of cirugias">
                              <td class="px-5 py-2 border-b border-gray-200 text-xs">
                                  <p class="text-gray-900 whitespace-no-wrap">
                                      {{ cirugia.fecha_realizacion | fecha }}
                                  </p>
                              </td>
                              <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    {{ cirugia.tipo_cirugia }}
                                </p>
                              </td>
                              <!-- <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    {{ cirugia.institucion.trim() !== '' ? cirugia.institucion : 'No especificado' }}
                                </p>
                              </td> -->
                          </tr>
                      </tbody>
                  </table>
            </div>
          </div>
        </div>  
      </div>
    </div>

    <!-- Estudios solicitados al paciente -->
    <div class="w-1/2 ml-4 border border-gray-300 shadow mb-5">
      <div class="flex items-center">
        <button class="border bg-secondaryColor text-sm focus:outline-none text-white border-secondaryColor p-2 font-semibold"> Estudios solicitados al paciente </button>
      </div> 
      <div class="p-2 mt-2 w-full">
        <p class="mb-2 text-gray-500 text-xl" *ngIf="estudios?.length === 0"> No se encontraron datos de estudios </p>  
        <div class="rounded-t">
          <div class="flex items-center justify-between">
            <div></div>
            <button *ngIf="estudios?.length > 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalEstudios()" class="hover:text-secondaryColor text-sm shadow border border-gray-300 focus:outline-none p-2 font-semibold rounded-t">
              Nuevo estudio
            </button>
          </div>
          <button *ngIf="estudios?.length === 0 && (authService.usuario.role === 'ADMIN_ROLE' || authService.usuario.role === 'DOCTOR_ROLE')" (click)="abrirModalEstudios()" class="border text-sm font-semibold hover:text-secondaryColor text-gray-800 focus:outline-none rounded shadow p-2 border-gray-300"> 
            Agregar datos de estudio
          </button>   
          <div *ngIf="estudios?.length > 0" class="py-2 mt-4 overflow-x-auto">
            <div class="inline-block max-h-56 overflow-y-auto min-w-full overflow-hidden">
                  <table class="min-w-full leading-normal">
                      <thead>
                          <tr>
                              <th class="px-5 border-b-2 py-1 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                  <div (click)="ordenarPorColumnaEstudios('createdAt')" class="cursor-pointer flex items-center focus:outline-none">
                                      <span> Alta </span>
                                      <span class="ml-2 text-gray-600">    
                                          <svg *ngIf="ordenar.columnaEstudios == 'createdAt' && ordenar.direccionEstudios == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                          <svg *ngIf="ordenar.columnaEstudios == 'createdAt' && ordenar.direccionEstudios == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                          <svg *ngIf="ordenar.columnaEstudios != 'createdAt'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                      </span>
                                  </div>
                              </th>
                              <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaEstudios('descripcion')" class="cursor-pointer flex items-center w-max focus:outline-none">
                                    <span> Estudio </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaEstudios == 'descripcion' && ordenar.direccionEstudios == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaEstudios == 'descripcion' && ordenar.direccionEstudios == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaEstudios != 'descripcion'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th>
                              <!-- <th class="px-5 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-800 tracking-wider">
                                <div (click)="ordenarPorColumnaEstudios('laboratorio')" class="cursor-pointer flex items-center focus:outline-none">
                                    <span> Laboratorio </span>
                                    <span class="ml-2 text-gray-600">    
                                        <svg *ngIf="ordenar.columnaEstudios == 'laboratorio' && ordenar.direccionEstudios == 1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>                                   
                                        <svg *ngIf="ordenar.columnaEstudios == 'laboratorio' && ordenar.direccionEstudios == -1" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                        <svg *ngIf="ordenar.columnaEstudios != 'laboratorio'" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    </span>
                                </div>
                              </th> -->
                          </tr>
                      </thead>
                      <tbody *ngIf="estudios">
                          <tr (click)="abrirInfoEstudio(estudio)" class="animate__animated cursor-pointer hover:bg-indigo-50 animate__fadeIn" *ngFor="let estudio of estudios">
                              <td class="px-5 py-2 border-b border-gray-200 text-xs">
                                  <p class="text-gray-900 whitespace-no-wrap">
                                      {{ estudio.createdAt | fecha }}
                                  </p>
                              </td>
                              <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    {{ estudio.descripcion }}
                                </p>
                              </td>
                              <!-- <td class="px-5 border-b border-gray-200 text-xs">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    {{ estudio.laboratorio.trim() !== '' ? estudio.laboratorio : 'No especificado' }}
                                </p>
                              </td> -->
                          </tr>
                      </tbody>
                  </table>
            </div>
          </div>
        </div>
      </div> 
    </div>
  </div>


</div>